(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{860:function(e,t,a){Promise.resolve().then(a.bind(a,1811))},1811:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return J}});var s,n,r,l=a(3827),o=a(4090),i=a(7180),d=a(4232),c=a(254),u=a.n(c),p=a(9539),h=a.n(p),_=a(9079);let m="production",E=null!==(s=_.env.HOST)&&void 0!==s?s:"localhost",f={test:"http://".concat(E,":6969/counts-per-mp"),development:"https://hidden-pad-313204.as.r.appspot.com/counts-per-mp",production:"https://hidden-pad-313204.as.r.appspot.com/counts-per-mp"},x={test:"http://".concat(E,":6969/current-mps"),development:"https://hidden-pad-313204.as.r.appspot.com/current-mps",production:"https://hidden-pad-313204.as.r.appspot.com/current-mps"},g={DEFAULT_COUNT_RANGE_END_DATE:h()(Date.now()),DEFAULT_COUNT_RANGE_START_DATE:h()(new Date("2020-08-24")),GET_COUNTS_PER_MP_FOR_DATE_RANGE:null!==(n=f[m])&&void 0!==n?n:f.development,GET_CURRENT_MPS:null!==(r=x[m])&&void 0!==r?r:x.development,STAGE:m};var D=a(7979),j=a.n(D),v=a(8370),T=e=>{let{allMPs:t,selectedMPs:a,selectMPs:s,isLoading:n}=e;console.log("see selectedMPs: ",a);let r=t.map(e=>{let t=e.name;return{label:t,value:t}}),i=t.length>0,d=o.useMemo(()=>a.map(e=>({label:e,value:e})),[a]);return console.log(d),(0,l.jsx)(v.NU,{className:j().multiSelect,options:r,value:d,onChange:e=>s(e.map(e=>{let{label:t}=e;return t})),labelledBy:i?"Please select Members of Parliament to get counts for":"Loading the list of Members of Parliament...",disabled:n})},A=a(356),b=a(5166),S=a(2256),C=a(8852),P=a.n(C),N=e=>{let{startDateForCount:t,selectStartDateForCount:a,endDateForCount:s,selectEndDateForCount:n,isLoading:r}=e;return(0,l.jsxs)("div",{id:P()["date-range-picker"],children:[(0,l.jsx)(S.x,{label:"Start Year & Month",views:["year","month"],minDate:g.DEFAULT_COUNT_RANGE_START_DATE,maxDate:g.DEFAULT_COUNT_RANGE_END_DATE,value:t,onChange:a,disabled:r}),(0,l.jsx)(S.x,{label:"End Year & Month",views:["year","month"],minDate:t,maxDate:g.DEFAULT_COUNT_RANGE_END_DATE,value:s,onChange:n,disabled:r})]})},R=a(3259),F=a.n(R),y=e=>{let{authors:t,selectedMPsForCount:a,selectMPsForCount:s,startDateForCount:n,selectStartDateForCount:r,endDateForCount:o,selectEndDateForCount:i,isLoading:d}=e;return(0,l.jsxs)("div",{id:F()["select-stats-filters"],children:[(0,l.jsx)(T,{allMPs:t,selectedMPs:a,selectMPs:s,isLoading:d}),(0,l.jsx)(A._,{dateAdapter:b.y,children:(0,l.jsx)(N,{startDateForCount:n,selectStartDateForCount:r,endDateForCount:o,selectEndDateForCount:i,isLoading:d})})]})},M=a(6251),U=a(3206),L=a(9309),O=a(9723),k=e=>{let{didMPsLoadFail:t,setDidMPsLoadFail:a}=e,s=()=>a(!1);return(0,l.jsx)(M.Z,{open:t,autoHideDuration:6e4,onClose:s,message:"",action:(0,l.jsx)(o.Fragment,{children:(0,l.jsx)(U.Z,{size:"small","aria-label":"close",color:"inherit",onClick:s,children:(0,l.jsx)(L.Z,{fontSize:"small"})})}),children:(0,l.jsx)(O.Z,{onClose:s,severity:"error",variant:"filled",sx:{width:"100%"},children:"Failed to load MPs to select, please reload the page or try again later."})})},w=e=>{let{didCountLoadFail:t,setDidCountLoadFail:a}=e,s=()=>a(!1);return(0,l.jsx)(M.Z,{open:t,autoHideDuration:6e3,onClose:s,message:"",action:(0,l.jsx)(o.Fragment,{children:(0,l.jsx)(U.Z,{size:"small","aria-label":"close",color:"inherit",onClick:s,children:(0,l.jsx)(L.Z,{fontSize:"small"})})}),children:(0,l.jsx)(O.Z,{onClose:s,severity:"error",variant:"filled",sx:{width:"100%"},children:"Failed to load the counts, please try again"})})},G=a(7908),Z=a(9079);let z=G.Z.create({baseURL:Z.env.REACT_APP_API_URL}),I=e=>z.get(g.GET_CURRENT_MPS,e?{headers:{Authorization:e}}:{}),Y=async(e,t,a,s)=>z.get(g.GET_COUNTS_PER_MP_FOR_DATE_RANGE,{params:{mpNames:e,startDate:t.toDate(),endDate:a.toDate()},...s&&{headers:{Authorization:s}}}),H=(0,d.default)(()=>Promise.all([a.e(815),a.e(794)]).then(a.bind(a,9794)),{loadableGenerated:{webpack:()=>[9794]},ssr:!1}),K=e=>{let t=[];for(let a in e){let s=e[a];for(let n in e[a]||(e[a]={}),s)t.includes(n)||t.push(n)}let a=[],s=Object.keys(e),n=Object.values(e);for(let t=0;t<Object.entries(e).length;t++)a.push({name:s[t],counts:n[t]});return[a,t]};function q(){let[e,t]=(0,o.useState)([]),[a,s]=(0,o.useState)([]),[n,r]=(0,o.useState)([]),[d,c]=(0,o.useState)([]),[p,h]=(0,o.useState)(!1),[_,m]=(0,o.useState)(g.DEFAULT_COUNT_RANGE_START_DATE),[E,f]=(0,o.useState)(g.DEFAULT_COUNT_RANGE_END_DATE),[x,D]=(0,o.useState)(!1),[j,v]=(0,o.useState)(!1);(0,o.useEffect)(()=>{var e;I(null!==(e=localStorage.getItem("DEVELOPER_API_KEY"))&&void 0!==e?e:void 0).then(e=>{e.data&&t(e.data)}).catch(e=>{v(!0)})},[]),(0,o.useEffect)(()=>{E<_||0===a.length||h(!0)},[a,_,E]),(0,o.useEffect)(()=>{var e;p&&Y(a,_,E,null!==(e=localStorage.getItem("DEVELOPER_API_KEY"))&&void 0!==e?e:void 0).then(e=>{let[t,a]=K(e.data);r(t),c(a)}).catch(e=>{console.error("See error when fetching count:",e),D(!0)}).finally(()=>h(!1))},[p,a,_,E]);let T=a.length>0,A=d.length>0;return(0,l.jsx)(i.Z,{children:(0,l.jsxs)("div",{className:u().App,children:[(0,l.jsx)("header",{children:(0,l.jsx)("h1",{children:"What Say Your MP"})}),(0,l.jsx)("div",{children:(0,l.jsxs)("p",{style:{padding:10,paddingLeft:15,paddingRight:15},children:["This project uses the"," ",(0,l.jsx)("a",{href:"https://www.parliament.gov.sg/parliamentary-business/official-reports-(parl-debates)",children:"official reports"})," ","of each parliamentary session to collect debate records, a.k.a. Hansards. These debates are then analyzed to investigate the involvement of each MP in debates."]})}),(0,l.jsxs)("div",{children:[(0,l.jsx)("h2",{children:"Overall Statistics"}),!T&&!p&&(0,l.jsx)("div",{children:(0,l.jsx)("p",{children:"Please Select Some MPs"})}),T&&!p&&!A&&(0,l.jsx)("div",{children:(0,l.jsx)("p",{children:"No results from the selection filter"})}),p?(0,l.jsx)("p",{children:"Loading..."}):A&&(0,l.jsx)(H,{debatesCount:n})]}),(0,l.jsx)(y,{authors:e,selectedMPsForCount:a,selectMPsForCount:e=>{s(e)},startDateForCount:_,selectStartDateForCount:e=>{m(e)},endDateForCount:E,selectEndDateForCount:e=>{f(e)},isLoading:p}),(0,l.jsxs)("footer",{children:[(0,l.jsx)("p",{children:"Made for the collective knowledge of Singaporeans and the betterment of Singaporean Democracy \uD83C\uDDF8\uD83C\uDDEC"}),(0,l.jsxs)("p",{children:["Please submit bugs, feature requests, and general feedback"," ",(0,l.jsx)("a",{target:"_blank",rel:"noreferrer",href:"https://forms.gle/seEDmBqZrQrqXeja8",children:"here"})]}),(0,l.jsx)("br",{})]}),(0,l.jsx)(w,{didCountLoadFail:x,setDidCountLoadFail:D}),(0,l.jsx)(k,{didMPsLoadFail:j,setDidMPsLoadFail:v})]})})}var B=a(345),V=a.n(B),W=a(2476),Q=a(4418),X=a(1333);function J(){return(0,l.jsx)("main",{className:V().main,children:(0,l.jsx)(q,{})})}W.S({dsn:"https://84525b373b9474b69bd9a6243c119d22@o4506650230194176.ingest.sentry.io/4506650231898112",integrations:"production"===g.STAGE?[new Q.gE({tracePropagationTargets:["https://hidden-pad-313204.as.r.appspot.com"]}),new X.U({maskAllText:!1,blockAllMedia:!1})]:[],tracesSampleRate:1,replaysSessionSampleRate:.1,replaysOnErrorSampleRate:1})},254:function(e){e.exports={App:"app_App__2bY1x"}},8852:function(e){e.exports={"date-range-picker":"style_date-range-picker__1K_I9"}},7979:function(e){e.exports={multiSelect:"style_multiSelect__2_0Kc"}},3259:function(e){e.exports={"select-stats-filters":"style_select-stats-filters___WIYw"}},345:function(e){e.exports={main:"page_main__GlU4n"}}},function(e){e.O(0,[119,221,971,69,744],function(){return e(e.s=860)}),_N_E=e.O()}]);