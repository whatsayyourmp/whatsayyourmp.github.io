(this["webpackJsonpdebates-frontend"]=this["webpackJsonpdebates-frontend"]||[]).push([[0],{143:function(e,t,a){},162:function(e,t,a){},163:function(e,t,a){},165:function(e,t,a){},171:function(e,t,a){},175:function(e,t,a){"use strict";a.r(t);var n,s,o,r=a(0),c=a.n(r),l=a(29),i=a.n(l),d=(a(143),a(81)),u=a.n(d),h=a(19),j=a.n(h);const b="production",O=null!==(n=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).HOST)&&void 0!==n?n:"localhost",p={default:"http://".concat(O,":6969/counts-per-mp"),production:"https://hidden-pad-313204.as.r.appspot.com/counts-per-mp"},f={default:"http://".concat(O,":6969/current-mps"),production:"https://hidden-pad-313204.as.r.appspot.com/current-mps"};var E={DEFAULT_COUNT_RANGE_END_DATE:j()(Date.now()),DEFAULT_COUNT_RANGE_START_DATE:j()(new Date("2020-08-24")),GET_COUNTS_PER_MP_FOR_DATE_RANGE:null!==(s=p[b])&&void 0!==s?s:p.default,GET_CURRENT_MPS:null!==(o=f[b])&&void 0!==o?o:f.default};a(162);var m=a(257),C=a(266),D=(a(163),a(2));var x=e=>{let{allMPs:t,selectedMPs:a,selectMPs:n,isLoading:s}=e;const o=t.map((e=>{const t=e.name;return{name:t,value:t}})),r=t.length>0;return Object(D.jsx)(m.a,{options:o,multiple:!0,search:!0,closeOnSelect:!0,filterOptions:C.a,placeholder:r?"Please select Members of Parliament to get counts for":"Loading the list of Members of Parliament...",onChange:n,value:a,printOptions:"on-focus",disabled:s})},T=a(103),_=a(254),g=a(255),S=a(256);a(165);var F=e=>{let{startDateForCount:t,selectStartDateForCount:a,endDateForCount:n,selectEndDateForCount:s,isLoading:o}=e;return Object(D.jsxs)("div",{id:"date-range-picker",children:[Object(D.jsx)(g.a,{label:"Start Year & Month",views:["year","month"],minDate:E.DEFAULT_COUNT_RANGE_START_DATE,maxDate:E.DEFAULT_COUNT_RANGE_END_DATE,value:t,onChange:a,renderInput:e=>Object(D.jsx)(S.a,{...e,helperText:null}),disabled:o}),Object(D.jsx)(g.a,{label:"End Year & Month",views:["year","month"],minDate:t,maxDate:E.DEFAULT_COUNT_RANGE_END_DATE,value:n,onChange:s,renderInput:e=>Object(D.jsx)(S.a,{...e,error:!0,helperText:"End date cannot be earlier than start."}),disabled:o})]})};a(171);var v=e=>{let{authors:t,selectedMPsForCount:a,selectMPsForCount:n,startDateForCount:s,selectStartDateForCount:o,endDateForCount:r,selectEndDateForCount:c,isLoading:l}=e;return Object(D.jsxs)("div",{id:"select-stats-filters",children:[Object(D.jsx)(x,{allMPs:t,selectedMPs:a,selectMPs:n,isLoading:l}),Object(D.jsx)(T.a,{dateAdapter:_.a,children:Object(D.jsx)(F,{startDateForCount:s,selectStartDateForCount:o,endDateForCount:r,selectEndDateForCount:c,isLoading:l})})]})},A=a(259),P=a(265),M=a(69),N=a.n(M),L=a(258);var R=e=>{let{didCountLoadFail:t,setDidCountLoadFail:a}=e;const n=()=>a(!1);return Object(D.jsx)(A.a,{open:t,autoHideDuration:6e3,onClose:n,message:"",action:Object(D.jsx)(r.Fragment,{children:Object(D.jsx)(P.a,{size:"small","aria-label":"close",color:"inherit",onClick:n,children:Object(D.jsx)(N.a,{fontSize:"small"})})}),children:Object(D.jsx)(L.a,{onClose:n,severity:"error",variant:"filled",sx:{width:"100%"},children:"Failed to load the counts, please try again"})})};var y=e=>{let{didMPsLoadFail:t,setDidMPsLoadFail:a}=e;const n=()=>a(!1);return Object(D.jsx)(A.a,{open:t,autoHideDuration:6e4,onClose:n,message:"",action:Object(D.jsx)(r.Fragment,{children:Object(D.jsx)(P.a,{size:"small","aria-label":"close",color:"inherit",onClick:n,children:Object(D.jsx)(N.a,{fontSize:"small"})})}),children:Object(D.jsx)(L.a,{onClose:n,severity:"error",variant:"filled",sx:{width:"100%"},children:"Failed to load MPs to select, please reload the page or try again later."})})},w=a(82);w.a.CanvasJS;const U=w.a.CanvasJSChart,k="#3498db",G="#2ecc71",B="#e74c3c",H="#f39c12",I="#9b59b6",W="#1abc9c",z="#e67e22",Q={"Written Answers to Questions for Oral Answer Not Answered by End of Question Time":k,"Written Answers to Questions":G,"Oral Answers to Questions":B,"President's Address":H,Budget:I,"Ministerial Statement":W,Clarification:z,Bills:"#34495e","Bills Introduced":"#95a5a6","Matter Raised On Adjournment Motion":"#2c3e50",Motion:z,"Corrections by Written Statements":"#27ae60",Tributes:"#8e44ad","Point Of Order":"#f1c40f",Petitions:k,"Permission to Members to be Absent":G,"Speaker / Announcement by Speaker":B,"Administration Of Oaths":H,Attendance:I,"Personal Explanation":W};function J(e){const t=[];return e.forEach((e=>{const{name:a}=e;t.includes(a)||t.push(a)})),t}var q=e=>{let{debatesCount:t}=e;const a=function(e){const t={};e.forEach((e=>{const{name:a,...n}=e;Object.keys(n).forEach((e=>{t[e]?t[e].push({label:a,y:n[e]}):t[e]=[{label:a,y:n[e]}]}))}));const a=J(e);return Object.values(t).forEach((e=>{const t=e.map((e=>e.label));a.forEach((a=>{t.includes(a)||e.push({label:a,y:0})}))})),Object.entries(t).forEach((e=>{let[a,n]=e;n.sort(((e,t)=>e.label.localeCompare(t.label))),t[a]=n})),t}(t),n=(s=J(t).length)<=3?300:300+100*Math.log2(s);var s;const o={height:n},r={height:n,toolTip:{shared:!0},legend:{verticalAlign:"top"},axisX:{interval:1},data:Object.keys(a).map((e=>({type:"stackedBar",color:Q[e],name:e,showInLegend:!0,indexLabelFontColor:"white",dataPoints:a[e]})))};return Object(D.jsx)(U,{containerProps:o,options:r})};var K=function(){const[e,t]=Object(r.useState)([]),[a,n]=Object(r.useState)([]),[s,o]=Object(r.useState)([]),[c,l]=Object(r.useState)([]),[i,d]=Object(r.useState)(!1),[h,j]=Object(r.useState)(E.DEFAULT_COUNT_RANGE_START_DATE),[b,O]=Object(r.useState)(E.DEFAULT_COUNT_RANGE_END_DATE),[p,f]=Object(r.useState)(!1),[m,C]=Object(r.useState)(!1);Object(r.useEffect)((()=>{u.a.get(E.GET_CURRENT_MPS).then((e=>{e.data&&t(e.data)})).catch((e=>{C(!0)}))}),[]),Object(r.useEffect)((()=>{b<h||0!==a.length&&d(!0)}),[a,h,b]),Object(r.useEffect)((()=>{i&&(async(e,t,a)=>u.a.get(E.GET_COUNTS_PER_MP_FOR_DATE_RANGE,{params:{mpNames:e,startDate:t.$d,endDate:a.$d}}))(a,h,b).then((e=>{const[t,a]=(e=>{const t=[];for(const o in e){const a=e[o];e[o]||(e[o]={});for(const e in a)t.includes(e)||t.push(e)}const a=[],n=Object.keys(e),s=Object.values(e);for(let o=0;o<Object.entries(e).length;o++)a.push({name:n[o],...s[o]});return[a,t]})(e.data);o(t),l(a)})).catch((e=>{console.error("See error when fetching count:",e),f(!0)})).finally((()=>d(!1)))}),[i,a,h,b]);const x=a.length>0,T=c.length>0;return Object(D.jsxs)("div",{className:"App",children:[Object(D.jsx)("header",{children:Object(D.jsx)("h1",{children:"What Say Your MP"})}),Object(D.jsx)("div",{children:Object(D.jsxs)("p",{children:["This project uses the"," ",Object(D.jsx)("a",{href:"https://www.parliament.gov.sg/parliamentary-business/official-reports-(parl-debates)",children:"official reports"})," ","of each parliamentary session to collect debate records, a.k.a. Hansards. These debates are then analyzed to investigate the involvement of each MP in debates."]})}),Object(D.jsxs)("div",{children:[Object(D.jsx)("h2",{children:"Overall Statistics"}),!x&&!i&&Object(D.jsx)("div",{children:Object(D.jsx)("p",{children:"Please Select Some MPs"})}),x&&!i&&!T&&Object(D.jsx)("div",{children:Object(D.jsx)("p",{children:"No results from the selection filter"})}),i?Object(D.jsx)("p",{children:"Loading..."}):T&&Object(D.jsx)(q,{debatesCount:s})]}),Object(D.jsx)(v,{authors:e,selectedMPsForCount:a,selectMPsForCount:e=>{n(e)},startDateForCount:h,selectStartDateForCount:e=>{j(e)},endDateForCount:b,selectEndDateForCount:e=>{O(e)},isLoading:i}),Object(D.jsxs)("footer",{className:"note",children:[Object(D.jsx)("p",{children:"Made for the collective knowledge of Singaporeans and the betterment of Singaporean Democracy \ud83c\uddf8\ud83c\uddec"}),Object(D.jsxs)("p",{children:["Please submit bugs, feature requests, and general feedback"," ",Object(D.jsx)("a",{target:"_blank",rel:"noreferrer",href:"https://forms.gle/seEDmBqZrQrqXeja8",children:"here"})]}),Object(D.jsx)("br",{})]}),Object(D.jsx)(R,{didCountLoadFail:p,setDidCountLoadFail:f}),Object(D.jsx)(y,{didMPsLoadFail:m,setDidMPsLoadFail:C})]})};var Y=e=>{e&&e instanceof Function&&a.e(3).then(a.bind(null,270)).then((t=>{let{getCLS:a,getFID:n,getFCP:s,getLCP:o,getTTFB:r}=t;a(e),n(e),s(e),o(e),r(e)}))};i.a.render(Object(D.jsx)(c.a.StrictMode,{children:Object(D.jsx)(K,{})}),document.getElementById("root")),Y()}},[[175,1,2]]]);
//# sourceMappingURL=main.6005dd48.chunk.js.map