(this["webpackJsonpdebates-frontend"]=this["webpackJsonpdebates-frontend"]||[]).push([[0],{143:function(e,t,a){},162:function(e,t,a){},163:function(e,t,a){},165:function(e,t,a){},171:function(e,t,a){},175:function(e,t,a){"use strict";a.r(t);var n,s,o,r=a(0),c=a.n(r),i=a(29),l=a.n(i),d=(a(143),a(99)),u=a.n(d),h=a(19),j=a.n(h);const b="production",O=null!==(n=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).HOST)&&void 0!==n?n:"localhost",p={local:"http://".concat(O,":6969/counts-per-mp"),default:"https://hidden-pad-313204.as.r.appspot.com/counts-per-mp",production:"https://hidden-pad-313204.as.r.appspot.com/counts-per-mp"},E={local:"http://".concat(O,":6969/current-mps"),default:"https://hidden-pad-313204.as.r.appspot.com/current-mps",production:"https://hidden-pad-313204.as.r.appspot.com/current-mps"};var f={DEFAULT_COUNT_RANGE_END_DATE:j()(Date.now()),DEFAULT_COUNT_RANGE_START_DATE:j()(new Date("2020-08-24")),GET_COUNTS_PER_MP_FOR_DATE_RANGE:null!==(s=p[b])&&void 0!==s?s:p.default,GET_CURRENT_MPS:null!==(o=E[b])&&void 0!==o?o:E.default,STAGE:b};const _=u.a.create({baseURL:Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_API_URL,headers:{"Content-Type":"application/json",..."production"!==f.STAGE?{Authorization:localStorage.getItem("DEVELOPER_API_KEY")}:{}}});a(162);var m=a(257),C=a(266),T=(a(163),a(2));var D=e=>{let{allMPs:t,selectedMPs:a,selectMPs:n,isLoading:s}=e;const o=t.map((e=>{const t=e.name;return{name:t,value:t}})),r=t.length>0;return Object(T.jsx)(m.a,{options:o,multiple:!0,search:!0,closeOnSelect:!0,filterOptions:C.a,placeholder:r?"Please select Members of Parliament to get counts for":"Loading the list of Members of Parliament...",onChange:n,value:a,printOptions:"on-focus",disabled:s})},S=a(103),g=a(254),x=a(255),A=a(256);a(165);var v=e=>{let{startDateForCount:t,selectStartDateForCount:a,endDateForCount:n,selectEndDateForCount:s,isLoading:o}=e;return Object(T.jsxs)("div",{id:"date-range-picker",children:[Object(T.jsx)(x.a,{label:"Start Year & Month",views:["year","month"],minDate:f.DEFAULT_COUNT_RANGE_START_DATE,maxDate:f.DEFAULT_COUNT_RANGE_END_DATE,value:t,onChange:a,renderInput:e=>Object(T.jsx)(A.a,{...e,helperText:null}),disabled:o}),Object(T.jsx)(x.a,{label:"End Year & Month",views:["year","month"],minDate:t,maxDate:f.DEFAULT_COUNT_RANGE_END_DATE,value:n,onChange:s,renderInput:e=>Object(T.jsx)(A.a,{...e,error:!0,helperText:"End date cannot be earlier than start."}),disabled:o})]})};a(171);var F=e=>{let{authors:t,selectedMPsForCount:a,selectMPsForCount:n,startDateForCount:s,selectStartDateForCount:o,endDateForCount:r,selectEndDateForCount:c,isLoading:i}=e;return Object(T.jsxs)("div",{id:"select-stats-filters",children:[Object(T.jsx)(D,{allMPs:t,selectedMPs:a,selectMPs:n,isLoading:i}),Object(T.jsx)(S.a,{dateAdapter:g.a,children:Object(T.jsx)(v,{startDateForCount:s,selectStartDateForCount:o,endDateForCount:r,selectEndDateForCount:c,isLoading:i})})]})},P=a(259),L=a(265),M=a(69),N=a.n(M),R=a(258);var y=e=>{let{didCountLoadFail:t,setDidCountLoadFail:a}=e;const n=()=>a(!1);return Object(T.jsx)(P.a,{open:t,autoHideDuration:6e3,onClose:n,message:"",action:Object(T.jsx)(r.Fragment,{children:Object(T.jsx)(L.a,{size:"small","aria-label":"close",color:"inherit",onClick:n,children:Object(T.jsx)(N.a,{fontSize:"small"})})}),children:Object(T.jsx)(R.a,{onClose:n,severity:"error",variant:"filled",sx:{width:"100%"},children:"Failed to load the counts, please try again"})})};var U=e=>{let{didMPsLoadFail:t,setDidMPsLoadFail:a}=e;const n=()=>a(!1);return Object(T.jsx)(P.a,{open:t,autoHideDuration:6e4,onClose:n,message:"",action:Object(T.jsx)(r.Fragment,{children:Object(T.jsx)(L.a,{size:"small","aria-label":"close",color:"inherit",onClick:n,children:Object(T.jsx)(N.a,{fontSize:"small"})})}),children:Object(T.jsx)(R.a,{onClose:n,severity:"error",variant:"filled",sx:{width:"100%"},children:"Failed to load MPs to select, please reload the page or try again later."})})},w=a(81);w.a.CanvasJS;const k=w.a.CanvasJSChart,G="#3498db",I="#2ecc71",H="#e74c3c",W="#f39c12",B="#9b59b6",K="#1abc9c",z="#e67e22",Q={"Written Answers to Questions for Oral Answer Not Answered by End of Question Time":G,"Written Answers to Questions":I,"Oral Answers to Questions":H,"President's Address":W,Budget:B,"Ministerial Statement":K,Clarification:z,Bills:"#34495e","Bills Introduced":"#95a5a6","Matter Raised On Adjournment Motion":"#2c3e50",Motion:z,"Corrections by Written Statements":"#27ae60",Tributes:"#8e44ad","Point Of Order":"#f1c40f",Petitions:G,"Permission to Members to be Absent":I,"Speaker / Announcement by Speaker":H,"Administration Of Oaths":W,Attendance:B,"Personal Explanation":K};function J(e){const t=[];return e.forEach((e=>{const{name:a}=e;t.includes(a)||t.push(a)})),t}var Y=e=>{let{debatesCount:t}=e;const a=function(e){const t={};e.forEach((e=>{const{name:a,...n}=e;Object.keys(n).forEach((e=>{t[e]?t[e].push({label:a,y:n[e]}):t[e]=[{label:a,y:n[e]}]}))}));const a=J(e);return Object.values(t).forEach((e=>{const t=e.map((e=>e.label));a.forEach((a=>{t.includes(a)||e.push({label:a,y:0})}))})),Object.entries(t).forEach((e=>{let[a,n]=e;n.sort(((e,t)=>e.label.localeCompare(t.label))),t[a]=n})),t}(t),n=(s=J(t).length)<=3?300:300+100*Math.log2(s);var s;const o={height:n},r={height:n,toolTip:{shared:!0},legend:{verticalAlign:"top"},axisX:{interval:1},data:Object.keys(a).map((e=>({type:"stackedBar",color:Q[e],name:e,showInLegend:!0,indexLabelFontColor:"white",dataPoints:a[e]})))};return Object(T.jsx)(k,{containerProps:o,options:r})};var q=function(){const[e,t]=Object(r.useState)([]),[a,n]=Object(r.useState)([]),[s,o]=Object(r.useState)([]),[c,i]=Object(r.useState)([]),[l,d]=Object(r.useState)(!1),[u,h]=Object(r.useState)(f.DEFAULT_COUNT_RANGE_START_DATE),[j,b]=Object(r.useState)(f.DEFAULT_COUNT_RANGE_END_DATE),[O,p]=Object(r.useState)(!1),[E,m]=Object(r.useState)(!1);Object(r.useEffect)((()=>{_.get(f.GET_CURRENT_MPS).then((e=>{e.data&&t(e.data)})).catch((e=>{m(!0)}))}),[]),Object(r.useEffect)((()=>{j<u||0!==a.length&&d(!0)}),[a,u,j]),Object(r.useEffect)((()=>{l&&(async(e,t,a)=>_.get(f.GET_COUNTS_PER_MP_FOR_DATE_RANGE,{params:{mpNames:e,startDate:t.$d,endDate:a.$d}}))(a,u,j).then((e=>{const[t,a]=(e=>{const t=[];for(const o in e){const a=e[o];e[o]||(e[o]={});for(const e in a)t.includes(e)||t.push(e)}const a=[],n=Object.keys(e),s=Object.values(e);for(let o=0;o<Object.entries(e).length;o++)a.push({name:n[o],...s[o]});return[a,t]})(e.data);o(t),i(a)})).catch((e=>{console.error("See error when fetching count:",e),p(!0)})).finally((()=>d(!1)))}),[l,a,u,j]);const C=a.length>0,D=c.length>0;return Object(T.jsxs)("div",{className:"App",children:[Object(T.jsx)("header",{children:Object(T.jsx)("h1",{children:"What Say Your MP"})}),Object(T.jsx)("div",{children:Object(T.jsxs)("p",{children:["This project uses the"," ",Object(T.jsx)("a",{href:"https://www.parliament.gov.sg/parliamentary-business/official-reports-(parl-debates)",children:"official reports"})," ","of each parliamentary session to collect debate records, a.k.a. Hansards. These debates are then analyzed to investigate the involvement of each MP in debates."]})}),Object(T.jsxs)("div",{children:[Object(T.jsx)("h2",{children:"Overall Statistics"}),!C&&!l&&Object(T.jsx)("div",{children:Object(T.jsx)("p",{children:"Please Select Some MPs"})}),C&&!l&&!D&&Object(T.jsx)("div",{children:Object(T.jsx)("p",{children:"No results from the selection filter"})}),l?Object(T.jsx)("p",{children:"Loading..."}):D&&Object(T.jsx)(Y,{debatesCount:s})]}),Object(T.jsx)(F,{authors:e,selectedMPsForCount:a,selectMPsForCount:e=>{n(e)},startDateForCount:u,selectStartDateForCount:e=>{h(e)},endDateForCount:j,selectEndDateForCount:e=>{b(e)},isLoading:l}),Object(T.jsxs)("footer",{className:"note",children:[Object(T.jsx)("p",{children:"Made for the collective knowledge of Singaporeans and the betterment of Singaporean Democracy \ud83c\uddf8\ud83c\uddec"}),Object(T.jsxs)("p",{children:["Please submit bugs, feature requests, and general feedback"," ",Object(T.jsx)("a",{target:"_blank",rel:"noreferrer",href:"https://forms.gle/seEDmBqZrQrqXeja8",children:"here"})]}),Object(T.jsx)("br",{})]}),Object(T.jsx)(y,{didCountLoadFail:O,setDidCountLoadFail:p}),Object(T.jsx)(U,{didMPsLoadFail:E,setDidMPsLoadFail:m})]})};var V=e=>{e&&e instanceof Function&&a.e(3).then(a.bind(null,270)).then((t=>{let{getCLS:a,getFID:n,getFCP:s,getLCP:o,getTTFB:r}=t;a(e),n(e),s(e),o(e),r(e)}))};l.a.render(Object(T.jsx)(c.a.StrictMode,{children:Object(T.jsx)(q,{})}),document.getElementById("root")),V()}},[[175,1,2]]]);
//# sourceMappingURL=main.0e50f741.chunk.js.map