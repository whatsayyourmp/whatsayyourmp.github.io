(this["webpackJsonpdebates-frontend"]=this["webpackJsonpdebates-frontend"]||[]).push([[0],{320:function(e,t,n){},339:function(e,t,n){},340:function(e,t,n){},478:function(e,t,n){},479:function(e,t,n){},485:function(e,t,n){},488:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),s=n(52),c=n.n(s),o=(n(320),n(8)),i=n(58),l=n(110),u=n.n(l),d=n(250),j=n(193),b=n.n(j),h=n(40),O=n.n(h),f={DEFAULT_COUNT_RANGE_END_DATE:O()(Date.now()),DEFAULT_COUNT_RANGE_START_DATE:O()(new Date("2020-08-24")),GET_COUNTS_PER_MP_FOR_DATE_RANGE:"http://localhost:6969/counts-per-mp",GET_CURRENT_MPS:"http://localhost:6969/current-mps"},p=function(){var e=Object(d.a)(u.a.mark((function e(t,n,a){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",b.a.get(f.GET_COUNTS_PER_MP_FOR_DATE_RANGE,{params:{mpNames:t,startDate:n.$d,endDate:a.$d}}));case 1:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}(),D=(n(339),n(559)),x=n(560),C=n(564),E=n(267),m=n(268),T=n(135),_=n(284),v=n(251),g=n.n(v),F=(n(340),n(1)),S=function(e){var t=e.transformedDebatesCount,n=e.uniqueReportTypes;return Object(F.jsxs)("div",{id:"debate-statistics-section",children:[Object(F.jsx)("h3",{children:"Debates Participated Per Selected MP"}),Object(F.jsx)(D.a,{width:"100%",minHeight:"50vh",children:Object(F.jsxs)(x.a,{width:500,height:300,data:t,margin:{top:20,right:30,left:20,bottom:5},children:[Object(F.jsx)(C.a,{strokeDasharray:"3 3"}),Object(F.jsx)(E.a,{dataKey:"name"}),Object(F.jsx)(m.a,{}),Object(F.jsx)(T.a,{}),n.map((function(e,t){return Object(F.jsx)(_.a,{dataKey:e,stackId:"a",fill:g()()},t)}))]})})]})},A=Object(a.memo)(S),P=n(579),N=n(583),M=(n(478),function(e){var t=e.allMPs,n=e.selectedMPs,a=e.selectMPs,r=e.isLoading,s=t.map((function(e,t){var n=e.name;return{name:n,value:n}})),c=t.length>0;return Object(F.jsx)(P.a,{options:s,multiple:!0,search:!0,closeOnSelect:!0,filterOptions:N.a,placeholder:c?"Please select Members of Parliament to get counts for":"Loading the list of Members of Parliament...",onChange:a,value:n,printOptions:"on-focus",disabled:r})}),R=n(275),L=n(576),y=n(577),U=n(578),w=(n(479),function(e){var t=e.startDateForCount,n=e.selectStartDateForCount,a=e.endDateForCount,r=e.selectEndDateForCount,s=e.isLoading;return Object(F.jsxs)("div",{id:"date-range-picker",children:[Object(F.jsx)(y.a,{label:"Start Year & Month",views:["year","month"],minDate:f.DEFAULT_COUNT_RANGE_START_DATE,maxDate:f.DEFAULT_COUNT_RANGE_END_DATE,value:t,onChange:n,renderInput:function(e){return Object(F.jsx)(U.a,Object(i.a)(Object(i.a)({},e),{},{helperText:null}))},disabled:s}),Object(F.jsx)(y.a,{label:"End Year & Month",views:["year","month"],minDate:t,maxDate:f.DEFAULT_COUNT_RANGE_END_DATE,value:a,onChange:r,disabled:s})]})}),G=(n(485),function(e){var t=e.authors,n=e.selectedMPsForCount,a=e.selectMPsForCount,r=e.startDateForCount,s=e.selectStartDateForCount,c=e.endDateForCount,o=e.selectEndDateForCount,i=e.isLoading;return Object(F.jsxs)("div",{id:"select-stats-filters",children:[Object(F.jsx)(M,{allMPs:t,selectedMPs:n,selectMPs:a,isLoading:i}),Object(F.jsx)(R.a,{dateAdapter:L.a,children:Object(F.jsx)(w,{startDateForCount:r,selectStartDateForCount:s,endDateForCount:c,selectEndDateForCount:o,isLoading:i})})]})}),k=n(582),I=n(588),z=n(282),H=n.n(z),Y=n(581),q=function(e){var t=e.didCountLoadFail,n=e.setDidCountLoadFail,r=function(){return n(!1)};return Object(F.jsx)(k.a,{open:t,autoHideDuration:6e3,onClose:r,message:"",action:Object(F.jsx)(a.Fragment,{children:Object(F.jsx)(I.a,{size:"small","aria-label":"close",color:"inherit",onClick:r,children:Object(F.jsx)(H.a,{fontSize:"small"})})}),children:Object(F.jsx)(Y.a,{onClose:r,severity:"error",variant:"filled",sx:{width:"100%"},children:"Failed to load the counts, please try again"})})};var B=function(){var e=Object(a.useState)([]),t=Object(o.a)(e,2),n=t[0],r=t[1],s=Object(a.useState)([]),c=Object(o.a)(s,2),l=c[0],u=c[1],d=Object(a.useState)([]),j=Object(o.a)(d,2),h=j[0],O=j[1],D=Object(a.useState)([]),x=Object(o.a)(D,2),C=x[0],E=x[1],m=Object(a.useState)(!1),T=Object(o.a)(m,2),_=T[0],v=T[1],g=Object(a.useState)(f.DEFAULT_COUNT_RANGE_START_DATE),S=Object(o.a)(g,2),P=S[0],N=S[1],M=Object(a.useState)(f.DEFAULT_COUNT_RANGE_END_DATE),R=Object(o.a)(M,2),L=R[0],y=R[1],U=Object(a.useState)(!1),w=Object(o.a)(U,2),k=w[0],I=w[1];Object(a.useEffect)((function(){b.a.get(f.GET_CURRENT_MPS).then((function(e){e.data&&r(e.data)}))}),[]),Object(a.useEffect)((function(){L<P||0!==l.length&&v(!0)}),[l,P,L]),Object(a.useEffect)((function(){_&&p(l,P,L).then((function(e){var t=function(e){var t=[];for(var n in e){var a=e[n];for(var r in e[n]||(e[n]={}),a)t.includes(r)||t.push(r)}for(var s=[],c=Object.keys(e),o=Object.values(e),l=0;l<Object.entries(e).length;l++)s.push(Object(i.a)({name:c[l]},o[l]));return[s,t]}(e.data),n=Object(o.a)(t,2),a=n[0],r=n[1];O(a),E(r)})).catch((function(e){console.error("See error when fetching count:",e),I(!0)})).finally((function(){return v(!1)}))}),[_,l,P,L]);var z=C.length>0;return Object(F.jsxs)("div",{className:"App",children:[Object(F.jsx)("header",{children:Object(F.jsx)("h1",{children:"What Say Your MP"})}),Object(F.jsx)("div",{children:Object(F.jsxs)("p",{children:["This project uses the "," ",Object(F.jsx)("a",{href:"https://www.parliament.gov.sg/parliamentary-business/official-reports-(parl-debates)",children:"official reports"})," "," ","of each parliamentary session to collect debate records, a.k.a. Hansards. These debates are then analyzed to investigate the involvement of each MP in debates."]})}),Object(F.jsxs)("div",{children:[Object(F.jsx)("h2",{children:"Overall Statistics"}),!z&&!_&&Object(F.jsx)("div",{children:Object(F.jsx)("p",{children:"Please Select Some MPs"})}),_?Object(F.jsx)("p",{children:"Loading..."}):z&&Object(F.jsx)(A,{transformedDebatesCount:h,uniqueReportTypes:C}),Object(F.jsx)(G,{authors:n,selectedMPsForCount:l,selectMPsForCount:function(e){u(e)},startDateForCount:P,selectStartDateForCount:function(e){N(e)},endDateForCount:L,selectEndDateForCount:function(e){y(e)},isLoading:_})]}),Object(F.jsxs)("footer",{className:"note",children:[Object(F.jsx)("p",{children:"Made for the collective knowledge of Singaporeans and the betterment of Singaporean Democracy \ud83c\uddf8\ud83c\uddec"}),Object(F.jsx)("br",{})]}),Object(F.jsx)(q,{didCountLoadFail:k,setDidCountLoadFail:I})]})},J=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,593)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,s=t.getLCP,c=t.getTTFB;n(e),a(e),r(e),s(e),c(e)}))};c.a.render(Object(F.jsx)(r.a.StrictMode,{children:Object(F.jsx)(B,{})}),document.getElementById("root")),J()}},[[488,1,2]]]);
//# sourceMappingURL=main.4a881f49.chunk.js.map