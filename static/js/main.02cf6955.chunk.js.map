{"version":3,"sources":["constants.js","services/index.js","components/MPMultiDropdown/index.js","components/DateRangePicker/index.js","components/SelectStatsFilters/index.js","components/LoadFailSnackbar/index.js","components/MPLoadFailSnackbar/index.js","components/GenericChart/index.js","App.js","reportWebVitals.js","index.js"],"names":["STAGE","process","localHostName","_process$env$HOST","HOST","GET_COUNTS_PER_MP_FOR_DATE_RANGE_URL_PER_STAGE","local","concat","default","production","GET_CURRENT_MPS_URL_PER_STAGE","Constants","DEFAULT_COUNT_RANGE_END_DATE","dayjs","Date","now","DEFAULT_COUNT_RANGE_START_DATE","GET_COUNTS_PER_MP_FOR_DATE_RANGE","_GET_COUNTS_PER_MP_FO","GET_CURRENT_MPS","_GET_CURRENT_MPS_URL_","api","axios","create","baseURL","REACT_APP_API_URL","headers","constants","localStorage","getItem","MPMultiDropdown","_ref","allMPs","selectedMPs","selectMPs","isLoading","options","map","author","mpName","name","value","authorsLoaded","length","_jsx","SelectSearch","multiple","search","closeOnSelect","filterOptions","fuzzySearch","placeholder","onChange","printOptions","disabled","DateRangePicker","startDateForCount","selectStartDateForCount","endDateForCount","selectEndDateForCount","_jsxs","id","children","DateTimePicker","label","views","minDate","maxDate","renderInput","params","TextField","helperText","error","SelectStatsFilters","authors","selectedMPsForCount","selectMPsForCount","LocalizationProvider","dateAdapter","AdapterDayjs","LoadFailSnackbar","didCountLoadFail","setDidCountLoadFail","closeSnackbar","Snackbar","open","autoHideDuration","onClose","message","action","Fragment","IconButton","size","aria-label","color","onClick","CloseIcon","fontSize","Alert","severity","variant","sx","width","MPLoadFailSnackbar","didMPsLoadFail","setDidMPsLoadFail","CanvasJSReact","CanvasJS","CanvasJSChart","COLORS","COLOR_LOOKUP_TABLE","Budget","Clarification","Bills","Motion","Tributes","Petitions","Attendance","getUniqueMPs","input","mps","forEach","inputDatum","includes","push","GenericChart","_ref2","debatesCount","dataForChartJSGraph","output","countPerMP","countsPerType","Object","keys","reportType","y","allUniqueMPsProvided","values","countsPerMp","uniqueMpsForReportType","uniqueMp","entries","countsPerMP","sort","a","b","localeCompare","transformDataForChartJSGraph","height","dataLength","Math","log2","containerProps","toolTip","shared","legend","verticalAlign","axisX","interval","data","countType","type","showInLegend","indexLabelFontColor","dataPoints","App","setAuthors","useState","setSelectedMPsForCount","setDebatesCount","uniqueSittingDates","setUniqueReportTypes","isCountLoading","setIsCountLoading","setStartDateForCount","setEndDateForCount","useEffect","get","then","response","catch","e","async","mpNames","startDate","endDate","$d","getCountsPerMPForDateRange","transformedDebatesCount","uniqueReportTypes","countPerReportTypePerMp","i","transformDebatesCountV2","console","finally","isAtLeastOneMPSelected","isAnyCountLoaded","className","href","justSelectedMPsForCount","justSelectedStartDate","justSelectedEndDate","target","rel","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","Sentry","dsn","integrations","tracePropagationTargets","maskAllText","blockAllMedia","tracesSampleRate","replaysSessionSampleRate","replaysOnErrorSampleRate","ReactDOM","render","React","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.02cf6955.chunk.js","sourcesContent":["import dayjs from 'dayjs';\n\nconst PARLIAMENT_START_DATE = '2020-08-24';\n\nconst STAGE = process.env.NODE_ENV;\n\nconst localHostName = process.env.HOST ?? 'localhost'\n\nconst GET_COUNTS_PER_MP_FOR_DATE_RANGE_URL_PER_STAGE = {\n  local: `http://${localHostName}:6969/counts-per-mp`,\n  default: 'https://hidden-pad-313204.as.r.appspot.com/counts-per-mp',\n  production: 'https://hidden-pad-313204.as.r.appspot.com/counts-per-mp',\n};\n\nconst GET_CURRENT_MPS_URL_PER_STAGE = {\n  local: `http://${localHostName}:6969/current-mps`,\n  default: 'https://hidden-pad-313204.as.r.appspot.com/current-mps',\n  production: 'https://hidden-pad-313204.as.r.appspot.com/current-mps',\n};\n\nconst Constants = {\n  DEFAULT_COUNT_RANGE_END_DATE: dayjs(Date.now()),\n  DEFAULT_COUNT_RANGE_START_DATE: dayjs(new Date(PARLIAMENT_START_DATE)),\n\n  GET_COUNTS_PER_MP_FOR_DATE_RANGE:\n    GET_COUNTS_PER_MP_FOR_DATE_RANGE_URL_PER_STAGE[STAGE] ??\n    GET_COUNTS_PER_MP_FOR_DATE_RANGE_URL_PER_STAGE.default,\n  GET_CURRENT_MPS:\n    GET_CURRENT_MPS_URL_PER_STAGE[STAGE] ??\n    GET_CURRENT_MPS_URL_PER_STAGE.default,\n\n  STAGE\n};\n\nexport default Constants;\n","import axios from 'axios';\nimport constants from '../constants';\n\nconst api = axios.create({\n  baseURL: process.env.REACT_APP_API_URL,\n  headers: {\n    ...{\n      'Content-Type': 'application/json'\n    }, ...(constants.STAGE !== 'production') ? {\n      'Authorization': localStorage.getItem('DEVELOPER_API_KEY'),\n    } : {}\n  }\n});\n\nconst getCurrentMPs = () => {\n  return api.get(constants.GET_CURRENT_MPS);\n};\n\nconst getCountsPerMPForDateRange = async (mpNames, startDate, endDate) => {\n  return api.get(constants.GET_COUNTS_PER_MP_FOR_DATE_RANGE, {\n    params: {\n      mpNames,\n      startDate: startDate.$d,\n      endDate: endDate.$d,\n    },\n  });\n};\n\nexport { getCurrentMPs, getCountsPerMPForDateRange };\n","import SelectSearch, { fuzzySearch } from 'react-select-search';\nimport './style.css';\n\nconst MPMultiDropdown = ({ allMPs, selectedMPs, selectMPs, isLoading }) => {\n  const options = allMPs.map((author) => {\n    const mpName = author.name;\n    return { name: mpName, value: mpName };\n  });\n  const loadingMessage = 'Loading the list of Members of Parliament...';\n  const placeholderMessage =\n    'Please select Members of Parliament to get counts for';\n  const authorsLoaded = allMPs.length > 0;\n  return (\n    <SelectSearch\n      options={options}\n      multiple={true}\n      search={true}\n      closeOnSelect={true}\n      filterOptions={fuzzySearch}\n      placeholder={authorsLoaded ? placeholderMessage : loadingMessage}\n      onChange={selectMPs}\n      value={selectedMPs}\n      printOptions={'on-focus'}\n      disabled={isLoading}\n    ></SelectSearch>\n  );\n};\n\nexport default MPMultiDropdown;\n","import { DateTimePicker } from '@mui/x-date-pickers/DateTimePicker';\nimport { TextField } from '@mui/material';\nimport constants from '../../constants';\nimport './style.css';\n\nconst DateRangePicker = ({\n  startDateForCount,\n  selectStartDateForCount,\n  endDateForCount,\n  selectEndDateForCount,\n  isLoading,\n}) => {\n  return (\n    <div id=\"date-range-picker\">\n      <DateTimePicker\n        label=\"Start Year & Month\"\n        views={['year', 'month']}\n        minDate={constants.DEFAULT_COUNT_RANGE_START_DATE}\n        maxDate={constants.DEFAULT_COUNT_RANGE_END_DATE}\n        value={startDateForCount}\n        onChange={selectStartDateForCount}\n        renderInput={(params) => <TextField {...params} helperText={null} />}\n        disabled={isLoading}\n      />\n      <DateTimePicker\n        label=\"End Year & Month\"\n        views={['year', 'month']}\n        minDate={startDateForCount}\n        maxDate={constants.DEFAULT_COUNT_RANGE_END_DATE}\n        value={endDateForCount}\n        onChange={selectEndDateForCount}\n        renderInput={(params) => {\n          return (\n            <TextField\n              {...params}\n              error={true}\n              helperText=\"End date cannot be earlier than start.\"\n            />\n          );\n        }}\n        disabled={isLoading}\n      />\n    </div>\n  );\n};\n\nexport default DateRangePicker;\n","import MPMultiDropdown from '../MPMultiDropdown';\nimport { LocalizationProvider } from '@mui/x-date-pickers/LocalizationProvider';\nimport { AdapterDayjs } from '@mui/x-date-pickers/AdapterDayjs';\nimport DateRangePicker from '../DateRangePicker';\n\nimport './style.css';\n\nconst SelectStatsFilters = ({\n  authors,\n  selectedMPsForCount,\n  selectMPsForCount,\n  startDateForCount,\n  selectStartDateForCount,\n  endDateForCount,\n  selectEndDateForCount,\n  isLoading,\n}) => {\n  return (\n    <div id=\"select-stats-filters\">\n      <MPMultiDropdown\n        allMPs={authors}\n        selectedMPs={selectedMPsForCount}\n        selectMPs={selectMPsForCount}\n        isLoading={isLoading}\n      />\n      <LocalizationProvider dateAdapter={AdapterDayjs}>\n        <DateRangePicker\n          startDateForCount={startDateForCount}\n          selectStartDateForCount={selectStartDateForCount}\n          endDateForCount={endDateForCount}\n          selectEndDateForCount={selectEndDateForCount}\n          isLoading={isLoading}\n        />\n      </LocalizationProvider>\n    </div>\n  );\n};\n\nexport default SelectStatsFilters;\n","import { Fragment } from 'react';\nimport Snackbar from '@mui/material/Snackbar';\nimport IconButton from '@mui/material/IconButton';\nimport CloseIcon from '@mui/icons-material/Close';\nimport Alert from '@mui/material/Alert';\n\nconst LoadFailSnackbar = ({ didCountLoadFail, setDidCountLoadFail }) => {\n  const closeSnackbar = () => setDidCountLoadFail(false);\n  return (\n    <Snackbar\n      open={didCountLoadFail}\n      autoHideDuration={6000}\n      onClose={closeSnackbar}\n      message=\"\"\n      action={\n        <Fragment>\n          <IconButton\n            size=\"small\"\n            aria-label=\"close\"\n            color=\"inherit\"\n            onClick={closeSnackbar}\n          >\n            <CloseIcon fontSize=\"small\" />\n          </IconButton>\n        </Fragment>\n      }\n    >\n      <Alert\n        onClose={closeSnackbar}\n        severity=\"error\"\n        variant=\"filled\"\n        sx={{ width: '100%' }}\n      >\n        Failed to load the counts, please try again\n      </Alert>\n    </Snackbar>\n  );\n};\n\nexport default LoadFailSnackbar;\n","import { Fragment } from 'react';\nimport Snackbar from '@mui/material/Snackbar';\nimport IconButton from '@mui/material/IconButton';\nimport CloseIcon from '@mui/icons-material/Close';\nimport Alert from '@mui/material/Alert';\n\nconst MPLoadFailSnackbar = ({ didMPsLoadFail, setDidMPsLoadFail }) => {\n  const closeSnackbar = () => setDidMPsLoadFail(false);\n  return (\n    <Snackbar\n      open={didMPsLoadFail}\n      autoHideDuration={60000}\n      onClose={closeSnackbar}\n      message=\"\"\n      action={\n        <Fragment>\n          <IconButton\n            size=\"small\"\n            aria-label=\"close\"\n            color=\"inherit\"\n            onClick={closeSnackbar}\n          >\n            <CloseIcon fontSize=\"small\" />\n          </IconButton>\n        </Fragment>\n      }\n    >\n      <Alert\n        onClose={closeSnackbar}\n        severity=\"error\"\n        variant=\"filled\"\n        sx={{ width: '100%' }}\n      >\n        Failed to load MPs to select, please reload the page or try again later.\n      </Alert>\n    </Snackbar>\n  );\n};\n\nexport default MPLoadFailSnackbar;\n","import React from 'react';\nimport CanvasJSReact from '@canvasjs/react-charts';\n\nconst CanvasJS = CanvasJSReact.CanvasJS;\nconst CanvasJSChart = CanvasJSReact.CanvasJSChart;\n\nconst COLORS = {\n    BLUE: '#3498db',\n    GREEN: '#2ecc71',\n    RED: '#e74c3c',\n    ORANGE: '#f39c12',\n    PURPLE: '#9b59b6',\n    TURQUOISE: '#1abc9c',\n    PUMPKIN: '#e67e22',\n    MIDNIGHT_BLUE: '#34495e',\n    CONCRETE: '#95a5a6',\n    CHARCOAL: '#2c3e50',\n    WISTERIA: '#8e44ad',\n    SUNFLOWER: '#f1c40f',\n    NEPHRITIS: '#27ae60',\n};\n\nconst COLOR_LOOKUP_TABLE = {\n    'Written Answers to Questions for Oral Answer Not Answered by End of Question Time':\n        COLORS.BLUE,\n    'Written Answers to Questions': COLORS.GREEN,\n    'Oral Answers to Questions': COLORS.RED,\n    \"President's Address\": COLORS.ORANGE,\n    Budget: COLORS.PURPLE,\n    'Ministerial Statement': COLORS.TURQUOISE,\n    Clarification: COLORS.PUMPKIN,\n    Bills: COLORS.MIDNIGHT_BLUE,\n    'Bills Introduced': COLORS.CONCRETE,\n    'Matter Raised On Adjournment Motion': COLORS.CHARCOAL,\n    Motion: COLORS.PUMPKIN,\n    'Corrections by Written Statements': COLORS.NEPHRITIS,\n    Tributes: COLORS.WISTERIA,\n    'Point Of Order': COLORS.SUNFLOWER,\n    Petitions: COLORS.BLUE,\n    'Permission to Members to be Absent': COLORS.GREEN,\n    'Speaker / Announcement by Speaker': COLORS.RED,\n    'Administration Of Oaths': COLORS.ORANGE,\n    Attendance: COLORS.PURPLE,\n    'Personal Explanation': COLORS.TURQUOISE,\n};\n\n\nfunction transformDataForChartJSGraph(debatesCount) {\n    const output = {};\n\n    debatesCount.forEach((countPerMP) => {\n        const { name: mpName, ...countsPerType } = countPerMP;\n        Object.keys(countsPerType).forEach((reportType) => {\n            if (!output[reportType]) {\n                output[reportType] = [{ label: mpName, y: countsPerType[reportType] }];\n            } else {\n                output[reportType].push({ label: mpName, y: countsPerType[reportType] });\n            }\n        });\n    });\n\n    // this is required to avoid having duplicate y-axis labels - \n    //  must zero-pad count for each report type if MPs did not participate in them\n    const allUniqueMPsProvided = getUniqueMPs(debatesCount)\n    Object.values(output).forEach((countsPerMp) => {\n        const uniqueMpsForReportType = countsPerMp.map(countPerMP => countPerMP.label)\n        allUniqueMPsProvided.forEach(uniqueMp => {\n            if (uniqueMpsForReportType.includes(uniqueMp)) {\n                return\n            }\n            countsPerMp.push({ label: uniqueMp, y: 0 })\n        })\n    })\n\n    // also need to make sure to sort the countsPerMP in each reportType by the mpName.\n    // For some reason, the graph is put on the bar chart by its index, not the label\n    Object.entries(output).forEach(([reportType, countsPerMP]) => {\n        countsPerMP.sort((a, b) => {\n            return a.label.localeCompare(b.label);\n        })\n        output[reportType] = countsPerMP\n    })\n\n    return output;\n}\n\n\nfunction getUniqueMPs(input) {\n    const mps = [];\n\n    input.forEach((inputDatum) => {\n        const { name } = inputDatum;\n\n        if (mps.includes(name)) {\n            return;\n        }\n\n        mps.push(name);\n    });\n\n    return mps;\n}\n\nfunction countNumberOfUniqueMPs(input) {\n    const mps = getUniqueMPs(input)\n\n    return mps.length;\n}\n\nfunction calculateHeight(dataLength) {\n    if (dataLength <= 3) {\n        return 300\n    }\n    return 300 + Math.log2(dataLength) * 100\n}\n\nconst GenericChart = ({ debatesCount }) => {\n    const dataForChartJSGraph = transformDataForChartJSGraph(debatesCount)\n\n    const height = calculateHeight(countNumberOfUniqueMPs(debatesCount))\n    const containerProps = {\n        height: height\n    }\n\n    const barChartData = Object.keys(dataForChartJSGraph)\n        .map(countType => {\n            return {\n                type: \"stackedBar\",\n                color: COLOR_LOOKUP_TABLE[countType],\n                name: countType,\n                showInLegend: true,\n                indexLabelFontColor: \"white\",\n                dataPoints: dataForChartJSGraph[countType]\n            }\n        })\n\n    const options = {\n        height,\n        toolTip: {\n            shared: true\n        },\n        legend: {\n            verticalAlign: \"top\"\n        },\n        axisX: {\n            interval: 1,\n        },\n        data: barChartData,\n    }\n    return (\n        <CanvasJSChart\n            containerProps={containerProps}\n            options={options}\n        />\n    );\n}\n\nexport default GenericChart;","import { useEffect, useState } from 'react';\nimport { getCurrentMPs, getCountsPerMPForDateRange } from './services/index';\nimport './App.css';\n// import DebateStatistics from './components/DebateStatistics';\nimport SelectStatsFilters from './components/SelectStatsFilters';\nimport LoadFailSnackbar from './components/LoadFailSnackbar';\nimport Constants from './constants';\nimport MPLoadFailSnackbar from './components/MPLoadFailSnackbar';\nimport GenericChart from './components/GenericChart';\n\nconst transformDebatesCountV2 = (countPerReportTypePerMp) => {\n  const uniqueReportTypes = [];\n\n  for (const mpName in countPerReportTypePerMp) {\n    const countsPerMP = countPerReportTypePerMp[mpName];\n    if (!countPerReportTypePerMp[mpName]) {\n      countPerReportTypePerMp[mpName] = {};\n    }\n\n    for (const reportType in countsPerMP) {\n      if (!uniqueReportTypes.includes(reportType)) {\n        uniqueReportTypes.push(reportType);\n      }\n    }\n  }\n\n  const transformedDebatesCount = [];\n  const keys = Object.keys(countPerReportTypePerMp);\n  const values = Object.values(countPerReportTypePerMp);\n  for (let i = 0; i < Object.entries(countPerReportTypePerMp).length; i++) {\n    transformedDebatesCount.push({ name: keys[i], ...values[i] });\n  }\n  return [transformedDebatesCount, uniqueReportTypes];\n};\n\nfunction App() {\n  const [authors, setAuthors] = useState([]);\n  const [selectedMPsForCount, setSelectedMPsForCount] = useState([]);\n  const [debatesCount, setDebatesCount] = useState([]);\n  const [uniqueSittingDates, setUniqueReportTypes] = useState([]);\n  const [isCountLoading, setIsCountLoading] = useState(false);\n  const [startDateForCount, setStartDateForCount] = useState(\n    Constants.DEFAULT_COUNT_RANGE_START_DATE,\n  );\n  const [endDateForCount, setEndDateForCount] = useState(\n    Constants.DEFAULT_COUNT_RANGE_END_DATE,\n  );\n  const [didCountLoadFail, setDidCountLoadFail] = useState(false);\n  const [didMPsLoadFail, setDidMPsLoadFail] = useState(false);\n\n  useEffect(() => {\n    getCurrentMPs()\n      .then((response) => {\n        if (response.data) {\n          setAuthors(response.data);\n        }\n      })\n      .catch((e) => {\n        setDidMPsLoadFail(true);\n      });\n  }, []);\n\n  useEffect(() => {\n    if (endDateForCount < startDateForCount) {\n      // console.error('TODO: Show error for startDate greater than endDate')\n      return;\n    }\n    if (selectedMPsForCount.length === 0) {\n      return;\n    }\n    setIsCountLoading(true);\n  }, [selectedMPsForCount, startDateForCount, endDateForCount]);\n\n  useEffect(() => {\n    if (!isCountLoading) {\n      return;\n    }\n    getCountsPerMPForDateRange(\n      selectedMPsForCount,\n      startDateForCount,\n      endDateForCount,\n    )\n      .then((response) => {\n        const [transformedDebatesCount, uniqueReportTypes] =\n          transformDebatesCountV2(response.data);\n        setDebatesCount(transformedDebatesCount);\n        setUniqueReportTypes(uniqueReportTypes);\n      })\n      .catch((error) => {\n        // TODO: catch such errors at Sentry\n        console.error('See error when fetching count:', error);\n        setDidCountLoadFail(true);\n      })\n      .finally(() => setIsCountLoading(false));\n  }, [isCountLoading, selectedMPsForCount, startDateForCount, endDateForCount]);\n\n  const selectMPsForCount = (justSelectedMPsForCount) => {\n    setSelectedMPsForCount(justSelectedMPsForCount);\n  };\n\n  const selectStartDateForCount = (justSelectedStartDate) => {\n    setStartDateForCount(justSelectedStartDate);\n  };\n\n  const selectEndDateForCount = (justSelectedEndDate) => {\n    setEndDateForCount(justSelectedEndDate);\n  };\n\n  const isAtLeastOneMPSelected = selectedMPsForCount.length > 0;\n  const isAnyCountLoaded = uniqueSittingDates.length > 0;\n\n  return (\n    <div className=\"App\">\n      <header>\n        <h1>What Say Your MP</h1>\n      </header>\n      <div>\n        <p>\n          This project uses the{' '}\n          <a href=\"https://www.parliament.gov.sg/parliamentary-business/official-reports-(parl-debates)\">\n            official reports\n          </a>{' '}\n          of each parliamentary session to collect debate records, a.k.a.\n          Hansards. These debates are then analyzed to investigate the\n          involvement of each MP in debates.\n        </p>\n      </div>\n      <div>\n        <h2>Overall Statistics</h2>\n        {!isAtLeastOneMPSelected && !isCountLoading && (\n          <div>\n            <p>Please Select Some MPs</p>\n          </div>\n        )}\n        {isAtLeastOneMPSelected && !isCountLoading && !isAnyCountLoaded && (\n          <div>\n            <p>No results from the selection filter</p>\n          </div>\n        )}\n        {/* Doing some very unscientific AB testing on the two types of charts */}\n        {\n          isCountLoading ? (\n            <p>Loading...</p>\n          ) : isAnyCountLoaded && <GenericChart debatesCount={debatesCount} />\n        }\n        {/* {isCountLoading ? (\n          <p>Loading...</p>\n        ) : (\n          isAnyCountLoaded && (\n            <DebateStatistics\n              transformedDebatesCount={debatesCount}\n              uniqueReportTypes={uniqueSittingDates}\n            />\n          )\n        )} */}\n      </div>\n      <SelectStatsFilters\n        authors={authors}\n        selectedMPsForCount={selectedMPsForCount}\n        selectMPsForCount={selectMPsForCount}\n        startDateForCount={startDateForCount}\n        selectStartDateForCount={selectStartDateForCount}\n        endDateForCount={endDateForCount}\n        selectEndDateForCount={selectEndDateForCount}\n        isLoading={isCountLoading}\n      />\n      <footer className=\"note\">\n        <p>\n          Made for the collective knowledge of Singaporeans and the betterment\n          of Singaporean Democracy ðŸ‡¸ðŸ‡¬\n        </p>\n        <p>\n          Please submit bugs, feature requests, and general feedback{' '}\n          <a\n            target=\"_blank\"\n            rel=\"noreferrer\"\n            href=\"https://forms.gle/seEDmBqZrQrqXeja8\"\n          >\n            here\n          </a>\n        </p>\n        <br></br>\n      </footer>\n      <LoadFailSnackbar\n        didCountLoadFail={didCountLoadFail}\n        setDidCountLoadFail={setDidCountLoadFail}\n      />\n      <MPLoadFailSnackbar\n        didMPsLoadFail={didMPsLoadFail}\n        setDidMPsLoadFail={setDidMPsLoadFail}\n      />\n    </div>\n  );\n}\n\nexport default App;\n","const reportWebVitals = (onPerfEntry) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport * as Sentry from \"@sentry/react\";\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\nimport constants from './constants'\n\nconst SENTRY_DSN = \"https://84525b373b9474b69bd9a6243c119d22@o4506650230194176.ingest.sentry.io/4506650231898112\";\n\nSentry.init({\n  dsn: SENTRY_DSN,\n  integrations: (constants.STAGE === 'production') && [\n    new Sentry.BrowserTracing({      \n      tracePropagationTargets: ['https://hidden-pad-313204.as.r.appspot.com'],\n    }),\n    new Sentry.Replay({\n      maskAllText: false,\n      blockAllMedia: false,\n    }),\n  ],\n  // Performance Monitoring\n  tracesSampleRate: 1.0, //  Capture 100% of the transactions\n  // Session Replay\n  replaysSessionSampleRate: 0.1, // This sets the sample rate at 10%. You may want to change it to 100% while in development and then sample at a lower rate in production.\n  replaysOnErrorSampleRate: 1.0, // If you're not already sampling the entire session, change the sample rate to 100% when sampling sessions where errors occur.\n});\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root'),\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}